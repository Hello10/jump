{"version":3,"file":"index.js","sources":["../src/readableCode.js","../src/username.js","../src/validators.js","../src/camelCaseKeys.js","../src/compact.js","../src/dayAndTime.js","../src/determineAddressType.js","../src/generateObjectID.js","../src/omitTypename.js","../src/pluralize.js","../src/setwiseEqual.js","../src/storageDownloadUrl.js"],"sourcesContent":["import {times} from 'lodash';\nimport {randomInt} from '@hello10/util';\n\n// No 'O' or '0'\nconst chars = 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789'.split('');\n\nfunction randomReadableChar () {\n  const index = randomInt(chars.length - 1);\n  return chars[index];\n}\n\nexport default function readableCode (len) {\n  return times(len, randomReadableChar).join('');\n}\n","import readableCode from './readableCode';\n\nconst suffix_length = 16;\nconst prefix = 'person';\n\nconst regex = new RegExp(`^${prefix}\\\\.[A-Za-z0-9]{${suffix_length}}$`);\n\nexport function generateUsername () {\n  const suffix = readableCode(suffix_length);\n  return `${prefix}.${suffix}`;\n}\n\nexport function isGeneratedUsername (username) {\n  return username.match(regex);\n}\n","import urlRegex from 'url-regex-safe';\nimport emailRegex from 'email-regex';\nimport phoneRegex from 'phone-regex';\n\nexport function isValidUrlStrict (url) {\n  const regex = urlRegex({\n    exact: true,\n    strict: true\n  });\n  return regex.test(url);\n}\n\nexport function isValidUrl (url) {\n  const regex = urlRegex({exact: true});\n  return regex.test(url);\n}\n\nexport function isValidEmail (email) {\n  const regex = emailRegex({exact: true});\n  return regex.test(email);\n}\n\nexport function isValidPhoneNumber (number) {\n  const regex = phoneRegex({exact: true});\n  return regex.test(number);\n}\n","import {mapKeys, camelCase} from 'lodash';\n\nexport default function camelCaseKeys (obj) {\n  return mapKeys(obj, (v, k)=> camelCase(k));\n}\n","import Type from 'type-of-is';\nimport {\n  compact,\n  identity,\n  pickBy\n} from 'lodash';\n\nexport default function compact_ (obj) {\n  const type = Type(obj);\n  switch (type) {\n    case Array:\n      return compact(obj);\n    case Object:\n      return pickBy(obj, identity);\n    case String:\n      return obj.replace(/\\s+/g, '');\n    default:\n      throw new Error(`compact does not support type ${type}`);\n  }\n}\n","export default function dayAndTime (date) {\n  date = new Date(date);\n  const day = date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n  const time = date.toLocaleTimeString();\n  return {day, time};\n}\n","import {\n  isValidEmail,\n  isValidPhoneNumber\n} from './validators';\n\nexport default function determineAddressType (address) {\n  if (isValidEmail(address)) {\n    return 'email';\n  }\n\n  if (isValidPhoneNumber(address)) {\n    return 'phone';\n  }\n\n  return null;\n}\n","/*  eslint-disable no-bitwise */\n\n// Based off:\n// https://github.com/mongodb/js-bson/blob/1.0-branch/lib/bson/objectid.js\n// https://stackoverflow.com/a/40031979/178043\n\nconst MACHINE_ID = parseInt(Math.random() * 0xffffff, 10);\n\nfunction uint16toHex (arr) {\n  return Array.prototype.map.call(arr, (x)=> (`00${x.toString(16)}`).slice(-2)).join('');\n}\n\nlet index = ~~(Math.random() * 0xffffff);\nfunction getInc () {\n  index = ((index + 1) % 0xffffff);\n  return index;\n}\n\nexport default function generateObjectID (time) {\n  if (typeof time !==  'number') {\n    time = ~~(Date.now() / 1000);\n  }\n\n  const pid = Math.floor(Math.random() * 100000) % 0xffff;\n\n  const inc = getInc();\n\n  // 12 bytes => 24 hex chars\n  const id = new Uint8Array(12);\n\n  // Encode time\n  id[3] = time & 0xff;\n  id[2] = (time >> 8) & 0xff;\n  id[1] = (time >> 16) & 0xff;\n  id[0] = (time >> 24) & 0xff;\n\n  // Encode machine\n  id[6] = MACHINE_ID & 0xff;\n  id[5] = (MACHINE_ID >> 8) & 0xff;\n  id[4] = (MACHINE_ID >> 16) & 0xff;\n\n  // Encode pid\n  id[8] = pid & 0xff;\n  id[7] = (pid >> 8) & 0xff;\n\n  // Encode index\n  id[11] = inc & 0xff;\n  id[10] = (inc >> 8) & 0xff;\n  id[9] = (inc >> 16) & 0xff;\n\n  return uint16toHex(id);\n}\n","import {omit} from 'lodash';\n\nexport default function omitTypename (obj) {\n  return obj ? omit(obj, '__typename') : obj;\n}\n","export default function pluralize ({count, singular, plural}) {\n  if (!plural) {\n    plural = `${singular}s`;\n  }\n  return (count === 1) ? `a ${singular}` : `${count} ${plural}`;\n}\n","import {\n  isEqual,\n  sortBy\n} from 'lodash';\n\nexport default function setwiseEqual (array1, array2) {\n  return isEqual(sortBy(array1), sortBy(array2));\n}\n","const BASE_PATH = 'https://firebasestorage.googleapis.com/v0/b';\n\nexport default function storageDownloadUrl ({bucket, key}) {\n  key = key.replace(/^\\//, '');\n  key = encodeURIComponent(key);\n  return `${BASE_PATH}/${bucket}/o/${key}?alt=media`;\n}\n"],"names":["chars","split","randomReadableChar","index","randomInt","length","readableCode","len","times","join","suffix_length","prefix","regex","RegExp","generateUsername","suffix","isGeneratedUsername","username","match","isValidUrlStrict","url","urlRegex","exact","strict","test","isValidUrl","isValidEmail","email","emailRegex","isValidPhoneNumber","number","phoneRegex","camelCaseKeys","obj","mapKeys","v","k","camelCase","compact_","type","Type","Array","compact","Object","pickBy","identity","String","replace","Error","dayAndTime","date","Date","day","toLocaleDateString","undefined","year","month","time","toLocaleTimeString","determineAddressType","address","MACHINE_ID","parseInt","Math","random","uint16toHex","arr","prototype","map","call","x","toString","slice","getInc","generateObjectID","now","pid","floor","inc","id","Uint8Array","omitTypename","omit","pluralize","count","singular","plural","setwiseEqual","array1","array2","isEqual","sortBy","BASE_PATH","storageDownloadUrl","bucket","key","encodeURIComponent"],"mappings":"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"}