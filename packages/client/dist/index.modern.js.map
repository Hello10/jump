{"version":3,"file":"index.modern.js","sources":["../../../node_modules/@hello10/logger/dist/index.js","../src/logger.js","../src/PageContainer.js","../src/ApplicationContainer.js","../src/Session.js","../src/FirebaseSession.js","../src/getClient.js","../src/getGraphQLErrorCode.js","../src/getSubdomain.js","../src/subdomainApps.js","../src/Router.js"],"sourcesContent":["function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nconst Levels = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];\nconst CONFIG_DELIMITER = ',';\nconst PART_DELIMITER = '|';\nconst NAME_DELIMITER = ':';\nconst CONFIG_SPLIT_REGEX = new RegExp(`[\\\\s${CONFIG_DELIMITER}]+`);\nconst PART_SPLIT_REGEX = new RegExp(`[\\\\s${PART_DELIMITER}]+`);\nconst ENV_KEY = 'LOGGER';\n\nfunction isString(arg) {\n  return (arg == null ? void 0 : arg.constructor) === String;\n}\n\nfunction isError(arg) {\n  return arg instanceof Error;\n}\n\nfunction bounded(pattern) {\n  return new RegExp(`^${pattern}$`);\n}\n\nclass Logger {\n  constructor(context = {}) {\n    if (isString(context)) {\n      context = {\n        name: context\n      };\n    }\n\n    if (!('name' in context)) {\n      throw new Error('Must specify name for logger');\n    }\n\n    this.context = context;\n    const {\n      name\n    } = context;\n    this.name = name;\n  }\n\n  static set time(fn) {\n    this._time = fn;\n  }\n\n  static enabled({\n    level,\n    name\n  }) {\n    const memo_key = [level, name].join(PART_DELIMITER);\n\n    if (memo_key in this.memo) {\n      return this.memo[memo_key];\n    }\n\n    for (const exclude of this.excludes) {\n      if (exclude.test(name)) {\n        this.memo[memo_key] = false;\n        return false;\n      }\n    }\n\n    const enabled = this.includes.some(include => {\n      const level_index = Levels.indexOf(level);\n      const this_index = Levels.indexOf(include.level);\n      const level_enabled = level_index >= this_index;\n      return level_enabled && include.name.test(name);\n    });\n    this.memo[memo_key] = enabled;\n    return enabled;\n  }\n\n  static set config(configs) {\n    this.includes = [];\n    this.excludes = [];\n    this.memo = {};\n\n    if (!Array.isArray(configs)) {\n      if (isString(configs)) {\n        configs = configs.split(CONFIG_SPLIT_REGEX);\n      } else {\n        throw new Error('When setting .config pass string or array of strings');\n      }\n    }\n\n    for (let config of configs) {\n      const is_exclude = config[0] === '-';\n\n      if (is_exclude) {\n        if (config.includes(PART_DELIMITER)) {\n          throw new Error('Exclude roles should not include level');\n        }\n\n        const name = bounded(config.substr(1));\n        this.excludes.push(name);\n      }\n\n      let [name, level] = config.split(PART_SPLIT_REGEX);\n      name = name.replace(/\\*/g, '.*?');\n      name = bounded(name);\n\n      if (!level) {\n        level = 'error';\n      }\n\n      const valid_level = Levels.includes(level);\n\n      if (!valid_level) {\n        throw new Error(`Invalid level ${level}`);\n      }\n\n      this.includes.push({\n        name,\n        level\n      });\n    }\n  }\n\n  static readConfig() {\n    function read() {\n      let config;\n\n      if (typeof process !== 'undefined') {\n        var _process$env;\n\n        config = (_process$env = process.env) == null ? void 0 : _process$env[ENV_KEY];\n\n        if (config) {\n          return config;\n        }\n      }\n\n      if (typeof window !== 'undefined') {\n        var _window$localStorage;\n\n        config = (_window$localStorage = window.localStorage) == null ? void 0 : _window$localStorage[ENV_KEY];\n\n        if (config) {\n          return config;\n        }\n      }\n\n      return '*';\n    }\n\n    this.config = read();\n  }\n\n  child(context = {}) {\n    if (isString(context)) {\n      context = {\n        name: context\n      };\n    }\n\n    let {\n      name\n    } = this.context;\n\n    if ('name' in context) {\n      name = [name, context.name].join(NAME_DELIMITER);\n    }\n\n    const new_context = _extends({}, this.context, context, {\n      name\n    });\n\n    const child = new this.constructor(new_context);\n    child.level = this.level;\n    return child;\n  }\n\n  _log(...args) {\n    let body = _extends({}, this.context);\n\n    for (const arg of args) {\n      const has_message = ('message' in body);\n\n      if (isString(arg)) {\n        if (!has_message) {\n          body.message = arg;\n        }\n      } else if (isError(arg)) {\n        if (!has_message) {\n          body.message = arg.message;\n        }\n\n        const props = Object.getOwnPropertyNames(arg);\n        const payload = props.reduce((payload, key) => {\n          payload[key] = arg[key];\n          return payload;\n        }, {});\n        body.error = JSON.stringify(payload);\n      } else if (arg) {\n        body = _extends({}, body, arg);\n      }\n    }\n\n    if (!('time' in body)) {\n      body.time = this.constructor._time();\n    }\n\n    return body;\n  }\n\n}\nLogger.includes = [];\nLogger.excludes = [];\nLogger.memo = {};\n\nLogger._time = function () {\n  return new Date().toISOString();\n};\n\nLogger.levels = Levels;\nLevels.forEach(level => {\n  const {\n    console\n  } = global;\n  const fn = level === 'fatal' ? 'error' : level;\n\n  Logger.prototype[level] = function log(...args) {\n    const body = this._log(...args);\n\n    const {\n      message,\n      name\n    } = body;\n    const enabled = Logger.enabled({\n      level,\n      name\n    });\n\n    if (enabled) {\n      console[fn](message, body);\n    }\n  };\n\n  Levels[level] = level;\n});\nLogger.readConfig();\n\nmodule.exports = Logger;\n//# sourceMappingURL=index.js.map\n","import Logger from '@hello10/logger';\n\nconst logger = new Logger('jump');\n\nexport default logger;\n","import * as React from 'react';\nimport {\n  useEffect,\n  useState\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport base_logger from './logger';\n\nexport default function PageContainer ({\n  Loading,\n  Error,\n  match,\n  client\n}) {\n  const {params, route} = match;\n  const {page: Page, name} = route;\n\n  const logger = base_logger.child('PageContainer');\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n\n  logger.debug('Rendering page container', {match, loading, error, data});\n\n  useEffect(()=> {\n    let unmounted = false;\n    async function runQuery () {\n      if (unmounted) {\n        logger.debug('Skipping unmounted query');\n        return;\n      }\n\n      try {\n        const page_query = Page.query(params);\n        logger.debug('Running query', page_query);\n        const {data} = await client.query(page_query);\n        logger.debug('Ran query', data);\n        setData(data);\n      } catch (error) {\n        logger.error('Error running query', error);\n        setError(error);\n      } finally {\n        logger.debug('Done loading');\n        setLoading(false);\n      }\n    }\n\n    if (Page.query) {\n      runQuery();\n    } else {\n      setLoading(false);\n    }\n\n    return ()=> {\n      logger.debug('Unmounting page container');\n      // TODO: why are these neccessary if the page is unmounted\n      setLoading(true);\n      setError(null);\n      setData(null);\n      unmounted = true;\n    };\n  }, [match]);\n\n  const props = {Page, match, route, params};\n\n  if (loading) {\n    logger.debug(`Rendering loading for ${name}`);\n    return (\n      <Loading {...props} />\n    );\n  } else if (error) {\n    logger.debug(`Rendering error for ${name}`);\n    return (\n      <Error\n        error={error}\n        {...props}\n      />\n    );\n  } else {\n    logger.debug(`Rendering loaded for ${name}`);\n    return (\n      <Page\n        match={match}\n        params={params}\n        route={route}\n        {...data}\n      />\n    );\n  }\n}\n\nPageContainer.propTypes = {\n  Loading: PropTypes.func,\n  Error: PropTypes.func,\n  match: PropTypes.object,\n  client: PropTypes.object\n};\n","import * as React from 'react';\nimport {useEffect} from 'react';\nimport PropTypes from 'prop-types';\n\nimport base_logger from './logger';\nimport PageContainer from './PageContainer';\n\n// TODO: default loading and error views.\n\nexport default function ApplicationContainer ({\n  ApplicationLoading,\n  Container,\n  PageLoading,\n  PageError,\n  client,\n  useRouter,\n  useSession,\n  ...props\n}) {\n  const logger = base_logger.child('ApplicationContainer');\n  logger.debug('Rendering ApplicationContainer');\n\n  const session = useSession();\n  const router = useRouter();\n\n  useEffect(()=> {\n    logger.debug('Loading session');\n    session.load();\n    return ()=> {\n      logger.debug('Unloading session');\n      session.unload();\n    };\n  }, []);\n\n  const {user, loaded, error} = session;\n  if (loaded) {\n    logger.debug('Running router', {session, user});\n    const match = router.match({user});\n\n    if (match.redirect) {\n      let msg = 'Got redirect';\n      const name = match.route?.name;\n      if (name) {\n        msg = `${msg} to ${name}`;\n      }\n      logger.info(msg, {match});\n    }\n\n    return (\n      <Container\n        match={match}\n      >\n        <PageContainer\n          Loading={PageLoading}\n          Error={PageError}\n          match={match}\n          client={client}\n          {...props}\n        />\n      </Container>\n    );\n  } else {\n    return (\n      <ApplicationLoading\n        error={error}\n        user={user}\n        {...props}\n      />\n    );\n  }\n}\n\nApplicationContainer.whyDidYouRender = {\n  logOnDifferentValues: true\n};\n\nApplicationContainer.propTypes = {\n  ApplicationLoading: PropTypes.func,\n  Container: PropTypes.func,\n  PageLoading: PropTypes.func,\n  PageError: PropTypes.func,\n  client: PropTypes.object,\n  useRouter: PropTypes.func,\n  useSession: PropTypes.func\n};\n","import {useSingleton} from '@hello10/react-hooks';\n\nimport logger from './logger';\n\nexport default class Session extends useSingleton.Singleton {\n  initialize () {\n    const {\n      SessionUser,\n      client,\n      shouldEndSessionOnError = ()=> {\n        return true;\n      }\n    } = this.options;\n\n    SessionUser.client = client;\n    const user = new SessionUser();\n\n    this.SessionUser = SessionUser;\n    this.client = client;\n    this.shouldEndSessionOnError = shouldEndSessionOnError;\n\n    this.logger = logger.child({\n      name: 'Session',\n      user\n    });\n\n    return {\n      user,\n      changing: false,\n      loaded: false,\n      error: null\n    };\n  }\n\n  get user () {\n    return this.state.user;\n  }\n\n  get changing () {\n    return this.state.changing;\n  }\n\n  get loaded () {\n    return this.state.loaded;\n  }\n\n  get error () {\n    return this.state.error;\n  }\n\n  get load_error () {\n    return this.loaded ? null : this.error;\n  }\n\n  async load () {\n    this.logger.debug('Loading session');\n    return this._change(async ()=> {\n      await this.client.loadAuth();\n      const user = await this.SessionUser.load();\n      this.logger.debug('Session loaded', {user});\n      return {\n        user,\n        loaded: true\n      };\n    });\n  }\n\n  unload () {}\n\n  start (args) {\n    this.logger.debug('Starting session');\n    return this._change(async ()=> {\n      const {user, auth} = await this.SessionUser.start(args);\n      this.logger.debug('Session started, setting auth', {user});\n      await this.client.setAuth(auth);\n      return {user};\n    });\n  }\n\n  refresh () {\n    const {SessionUser} = this;\n    if (SessionUser.refresh) {\n      this.logger.debug('No refresh method defined on SessionUser');\n      return null;\n    }\n\n    this.logger.debug('Refreshing session');\n    return this._change(async ()=> {\n      const {client} = this;\n      const client_auth = await client.getAuth();\n      const data = await SessionUser.refresh(client_auth);\n      const {user, auth} = data;\n      this.logger.debug('Session refreshed, setting auth', {user});\n      await client.setAuth(auth);\n      return {user};\n    });\n  }\n\n  end (args) {\n    const {SessionUser} = this;\n    this.logger.debug('Ending session');\n    return this._change(async ()=> {\n      try {\n        await SessionUser.end(args);\n        this.logger.debug('Session ended');\n      } catch (error) {\n        this.logger.error('Error ending sesssion', error);\n      }\n      await this.client.clearAuth();\n      const user = new SessionUser();\n      return {user};\n    });\n  }\n\n  async _change (action) {\n    if (!this.changing) {\n      this.setState({changing: true});\n    }\n\n    try {\n      const state = await action();\n      this.setState({\n        changing: false,\n        error: null,\n        ...state\n      });\n    } catch (error) {\n      this.logger.error('Session error', {error});\n      let {user} = this;\n      if (this.shouldEndSessionOnError(error)) {\n        this.logger.debug('Clearing session on error');\n        await this.client.clearAuth();\n        user = null;\n      }\n      this.setState({\n        changing: false,\n        user,\n        error\n      });\n    }\n  }\n}\n","import Session from './Session';\n\nexport default class FirebaseSession extends Session {\n  get auth () {\n    return this.options.auth;\n  }\n\n  get Firebase () {\n    return this.options.Firebase;\n  }\n\n  async load () {\n    this.logger.debug('Loading session');\n\n    this.setState({changing: true});\n\n    const {SessionUser, client} = this;\n    const auth = this.Firebase.auth();\n    this.unsubscribe = auth.onAuthStateChanged(async (firebase_user)=> {\n      this.logger.debug('Firebase auth state changed', {firebase_user});\n      this._change(async ()=> {\n        let user;\n        if (firebase_user) {\n          this.logger.debug('Getting firebase user token');\n          const token = await firebase_user.getIdToken(true);\n          client.setAuth({token});\n          this.logger.debug('Loading session user');\n          user = await SessionUser.load({client, token, firebase_user});\n        } else {\n          this.logger.debug('No firebase user clearing session');\n          await client.clearAuth();\n          user = new SessionUser();\n        }\n        return {user, loaded: true};\n      });\n    });\n  }\n\n  async unload () {\n    this.logger.debug('Unsubscribing from Firebase auth listener');\n    this.unsubscribe();\n  }\n\n  async start ({\n    email,\n    password,\n    provider: provider_name,\n    popup = false\n  }) {\n    const provider_method = popup ? 'signInWithPopup' : 'signInWithRedirect';\n    const dedicated_providers = ['Google', 'Facebook', 'Twitter', 'Github'];\n    const oauth_providers = ['Yahoo', 'Microsoft', 'Apple'];\n\n    function invalidMode () {\n      throw new Error(`Invalid auth mode: ${provider_name}`);\n    }\n\n    const {Firebase, auth} = this;\n\n    try {\n      let credential;\n      if (provider_name.includes('Email')) {\n        if (provider_name === 'EmailSignin') {\n          this.logger.debug('Signing in with email', {email});\n          credential = await auth.signInWithEmailAndPassword(email, password);\n        } else if (provider_name === 'EmailSignup') {\n          this.logger.debug('Signing up with email', {email});\n          credential = await auth.createUserWithEmailAndPassword(email, password);\n          this.logger.debug('Sending session email verification');\n          await credential.user.sendEmailVerification();\n        } else {\n          invalidMode();\n        }\n      } else if (dedicated_providers.includes(provider_name)) {\n        const Provider = Firebase.auth[`${provider_name}AuthProvider`];\n        const provider = new Provider();\n        this.logger.debug('Authorizing via dedicated provider', {provider_name, provider_method});\n        credential = await auth[provider_method](provider);\n      } else if (oauth_providers.includes(provider_name)) {\n        const domain = `${provider_name.toLowerCase()}.com`;\n        const provider = new Firebase.auth.OAuthProvider(domain);\n        this.logger.debug('Authorizing via OAuth provider', {domain, provider_method});\n        credential = await auth[provider_method](provider);\n      } else {\n        invalidMode();\n      }\n      return credential;\n    } catch (error) {\n      this.logger.debug('Error authenticating', error);\n      throw error;\n    }\n  }\n\n  async end () {\n    this.setState({changing: true});\n    return this.auth.signOut();\n  }\n}\n","import gql from 'graphql-tag';\nimport {ApolloClient} from 'apollo-client';\nimport {setContext} from 'apollo-link-context';\nimport {createHttpLink} from 'apollo-link-http';\nimport {InMemoryCache} from 'apollo-cache-inmemory';\n\nimport base_logger from './logger';\n\nconst NO_SESSION = {\n  token: null,\n  refresh_token: null\n};\n\nexport default function getClient ({uri, storage, storage_key = 'JUMP_AUTH'}) {\n  const logger = base_logger.child({name: 'getClient', uri});\n\n  logger.info('Getting client');\n\n  const http_link = createHttpLink({uri});\n\n  const auth_link = setContext(async (request, prev_context)=> {\n    const {headers = {}} = prev_context;\n    const {token} = await readClientAuth();\n    if (token) {\n      logger.debug('Adding auth token to header');\n      headers.authorization = token ? `Bearer ${token}` : '';\n    }\n    return {headers};\n  });\n\n  const link = auth_link.concat(http_link);\n  const cache = new InMemoryCache();\n  const client = new ApolloClient({link, cache});\n  writeClientAuth(NO_SESSION);\n\n  async function readClientAuth () {\n    logger.debug('Getting client auth');\n    const query = gql`\n      {\n        token @client\n        refresh_token @client\n      }\n    `;\n    const {data} = await client.query({query});\n    return data;\n  }\n\n  function writeClientAuth (auth) {\n    logger.debug('Setting client auth');\n    return client.writeData({data: auth});\n  }\n\n  function writeAuthToStorage (auth) {\n    logger.debug('Writing auth to storage');\n    const json = JSON.stringify(auth);\n    return storage.setItem(storage_key, json);\n  }\n\n  async function readAuthFromStorage () {\n    logger.debug('Reading auth from storage');\n    let auth;\n    try {\n      const json = await storage.getItem(storage_key);\n      auth = JSON.parse(json) || {};\n    } catch (error) {\n      auth = {};\n    }\n    return auth;\n  }\n\n  async function setAuth (auth) {\n    logger.debug('Setting session auth');\n    if (storage) {\n      await writeAuthToStorage(auth);\n    }\n    return writeClientAuth(auth);\n  }\n\n  async function loadAuth () {\n    if (!storage) {\n      throw new Error('No storage specified to load auth from');\n    }\n    logger.debug('Loading session auth');\n    const auth = await readAuthFromStorage();\n    return writeClientAuth(auth);\n  }\n\n  async function clearAuth () {\n    logger.debug('Clearing session auth');\n    if (storage) {\n      await writeAuthToStorage(NO_SESSION);\n    }\n    return writeClientAuth(NO_SESSION);\n  }\n\n  client.setAuth = setAuth;\n  client.loadAuth = loadAuth;\n  client.clearAuth = clearAuth;\n\n  return client;\n}\n","import get from 'lodash.get';\n\nexport default function getGraphQLErrorCode (error) {\n  let code = get(error, 'graphQLErrors[0].extensions.code', null);\n  if (!code) {\n    code = get(error, 'networkError.result.errors[0].extensions.code', null);\n  }\n  return code;\n}\n","export default function getSubdomain (hostname) {\n  const parts = hostname.split('.');\n\n  let last_index = -2;\n  const last = parts[parts.length - 1];\n  const is_localhost = last === 'localhost';\n  if (is_localhost) {\n    last_index = -1;\n  }\n\n  return parts.slice(0, last_index).join('.');\n}\n","import getSubdomain from './getSubdomain';\n\nexport default function subdomainApps (map) {\n  const main = map.find((item)=> item.main);\n  if (!main) {\n    throw new Error('Must set main flag to true on at least one subdomain app');\n  }\n\n  return function getApp () {\n    const {hostname} = window.location;\n    const subdomain = getSubdomain(hostname);\n\n    if (!subdomain) {\n      return main.app;\n    }\n\n    const app = map.find(({subdomains})=> subdomains.includes(subdomain));\n    if (app) {\n      return app.app;\n    } else {\n      return main.app;\n    }\n  };\n}\n","import {useSingleton} from '@hello10/react-hooks';\nimport Groutcho from 'groutcho';\n\nimport logger from './logger';\n\nexport default class Router extends useSingleton.Singleton {\n  initialize () {\n    this.history = [];\n\n    if (('web' in this.options)) {\n      this.web = this.options.web;\n    } else {\n      this.web = !!(window && window.location && window.history);\n    }\n\n    const {routes, redirects} = this.options;\n    this.router = new Groutcho.Router({routes, redirects});\n    this.router.onGo(this._onGo.bind(this));\n\n    let url = '/';\n    if (this.web) {\n      const {location} = window;\n      const {pathname, search} = location;\n      url = `${pathname}${search}`;\n      window.addEventListener('popstate', this._onPopState.bind(this));\n    }\n\n    this.logger = logger.child({\n      name: 'Router',\n      web: this.web\n    });\n\n    this.logger.debug('Initializing router');\n\n    return {url};\n  }\n\n  get url () {\n    return this.state.url;\n  }\n\n  match (input) {\n    this.input = input;\n    const match = this.router.match({\n      ...input,\n      url: this.url\n    });\n    const {redirect, url} = match;\n    if (redirect) {\n      this._setUrl(url);\n    }\n    this.logger.debug('Router got match', {match, input});\n    return match;\n  }\n\n  go (args) {\n    args = {\n      ...this.input,\n      ...this.router._normalizeInput(args)\n    };\n    this.logger.debug('Router go called', {args, url: this.url});\n    this.router.go(args);\n  }\n\n  back () {\n    const last = this.history.pop();\n    if (!last) {\n      return;\n    }\n    this.go(last);\n  }\n\n  _setUrl (url) {\n    this.logger.debug('Setting router url', url);\n    if (url !== this.url) {\n      const state = {url};\n      this.setState(state);\n      this.history.push(state);\n      if (this.web) {\n        window.history.pushState(state, '', url);\n      }\n    }\n  }\n\n  _onGo (match) {\n    this.logger.debug('Router onGo called', {match, current: this.url});\n    const {url} = match;\n    if (url !== this.url) {\n      this._setUrl(url);\n      const {onGo} = this.options;\n      if (onGo) {\n        onGo(match);\n      }\n    }\n  }\n\n  _onPopState ({state}) {\n    this.setState(state);\n  }\n}\n"],"names":["level_enabled","include","config","arg","payload","Logger","_time","readConfig","logger","PageContainer","Loading","Error","match","client","params","route","page","Page","name","base_logger","child","loading","setLoading","useState","error","setError","data","setData","debug","useEffect","unmounted","runQuery","page_query","query","props","React.createElement","propTypes","PropTypes","func","object","ApplicationContainer","ApplicationLoading","Container","PageLoading","PageError","useRouter","useSession","session","router","load","unload","user","loaded","redirect","msg","info","whyDidYouRender","logOnDifferentValues","Session","useSingleton","Singleton","initialize","SessionUser","shouldEndSessionOnError","options","changing","state","load_error","_change","loadAuth","start","args","auth","setAuth","refresh","client_auth","getAuth","end","clearAuth","action","setState","FirebaseSession","Firebase","unsubscribe","onAuthStateChanged","firebase_user","token","getIdToken","email","password","provider","provider_name","popup","provider_method","dedicated_providers","oauth_providers","invalidMode","credential","includes","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendEmailVerification","Provider","domain","toLowerCase","OAuthProvider","signOut","NO_SESSION","refresh_token","getClient","uri","storage","storage_key","http_link","createHttpLink","auth_link","setContext","request","prev_context","headers","readClientAuth","authorization","link","concat","cache","InMemoryCache","ApolloClient","writeClientAuth","gql","writeData","writeAuthToStorage","json","JSON","stringify","setItem","readAuthFromStorage","getItem","parse","getGraphQLErrorCode","code","get","getSubdomain","hostname","parts","split","last_index","last","length","is_localhost","slice","join","subdomainApps","map","main","find","item","getApp","window","location","subdomain","app","subdomains","Router","history","web","routes","redirects","Groutcho","onGo","_onGo","bind","url","pathname","search","addEventListener","_onPopState","input","_setUrl","go","_normalizeInput","back","pop","push","pushState","current"],"mappings":"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"}